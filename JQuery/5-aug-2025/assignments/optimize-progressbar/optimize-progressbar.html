<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Optimized Progress Bar</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- jQuery CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <style>
    .progress {
      height: 30px;
    }
    .progress-bar {
      font-weight: bold;
      transition: none; /* we use jQuery animate instead */
    }
  </style>
</head>
<body class="p-4">

  <h2 class="mb-4 text-center"> Optimized jQuery Progress Bar</h2>

  <!-- Dropdown Input -->
  <div class="mb-3 w-25">
    <label for="percentage-list" class="form-label">Select Percentage:</label>
    <select id="percentage-list" class="form-select">
      <option value="0">0%</option>
      <option value="25">25%</option>
      <option value="50">50%</option>
      <option value="75">75%</option>
      <option value="100">100%</option>
    </select>
  </div>

  <!-- Slider Input -->
  <div class="mb-3 w-50">
    <label for="progress-range" class="form-label">Adjust Progress:</label>
    <input type="range" class="form-range" id="progress-range" min="0" max="100" step="1" value="0">
    <span class="fw-bold">Current Value: <span id="range-value">0%</span></span>
  </div>

  <!-- Bootstrap Progress Bar -->
  <div class="progress mt-4">
    <div
      class="progress-bar bg-success"
      role="progressbar"
      id="animated-progress-bar"
      style="width: 0%"
    >
      0%
    </div>
  </div>

  <!-- jQuery Script -->
  <script>
    $(document).ready(function () {
      function updateProgress(percentage) {
        // Update range value display
        $("#range-value").text(percentage + "%");

        // Stop any current animation and animate to new value
        $("#animated-progress-bar").stop().animate(
          { width: percentage + "%" },
          {
            duration: 600,
            step: function (now) {
              $("#animated-progress-bar").text(Math.ceil(now) + "%");
            }
          }
        );
      }

      // Dropdown change
      $("#percentage-list").change(function () {
        const value = $(this).val();
        $("#progress-range").val(value); // sync slider
        updateProgress(value);
      });

      // Slider change
      $("#progress-range").on("input", function () {
        const value = $(this).val();
        $("#percentage-list").val(value); // sync dropdown
        updateProgress(value);
      });

      // Initialize to 0%
      updateProgress(0);
    });
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
